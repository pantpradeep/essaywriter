!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof module&&module.exports?module.exports=e():t.DateFormatter=e()}("undefined"!=typeof self?self:this,function(){function t(t){var e=this,n=M.merge(M.defaults,t);e.dateSettings=n.dateSettings,e.separators=n.separators,e.validParts=n.validParts,e.intParts=n.intParts,e.tzParts=n.tzParts,e.tzClip=n.tzClip}var M={DAY:864e5,HOUR:3600,defaults:{dateSettings:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["AM","PM"],ordinal:function(t){var e=t%10,n={1:"st",2:"nd",3:"rd"};return 1!==Math.floor(t%100/10)&&n[e]?n[e]:"th"}},separators:/[ \-+\/.:@]/g,validParts:/[dDjlNSwzWFmMntLoYyaABgGhHisueTIOPZcrU]/g,intParts:/[djwNzmnyYhHgGis]/g,tzParts:/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,tzClip:/[^-+\dA-Z]/g},getInt:function(t,e){return parseInt(t,e||10)},compare:function(t,e){return"string"==typeof t&&"string"==typeof e&&t.toLowerCase()===e.toLowerCase()},lpad:function(t,e,n){var r=t.toString();return n=n||"0",r.length<e?M.lpad(n+r,e):r},merge:function(t){var e,n;for(t=t||{},e=1;e<arguments.length;e++)if(n=arguments[e])for(var r in n)n.hasOwnProperty(r)&&("object"==typeof n[r]?M.merge(t[r],n[r]):t[r]=n[r]);return t},getIndex:function(t,e){for(var n=0;n<e.length;n++)if(e[n].toLowerCase()===t.toLowerCase())return n;return-1}};return t.prototype={constructor:t,getMonth:function(t){var e=M.getIndex(t,this.dateSettings.monthsShort)+1;return 0===e&&(e=M.getIndex(t,this.dateSettings.months)+1),e},parseDate:function(t,e){var n,r,a,u,i,o,s,c,f,l,d=this,g=!1,h=!1,m=d.dateSettings,p={date:null,year:null,month:null,day:null,hour:0,min:0,sec:0};if(!t)return null;if(t instanceof Date)return t;if("U"===e)return(a=M.getInt(t))?new Date(1e3*a):t;switch(typeof t){case"number":return new Date(t);case"string":break;default:return null}if(!(n=e.match(d.validParts))||0===n.length)throw new Error("Invalid date format definition.");for(a=n.length-1;0<=a;a--)"S"===n[a]&&n.splice(a,1);for(r=t.replace(d.separators,"\0").split("\0"),a=0;a<r.length;a++)switch(u=r[a],i=M.getInt(u),n[a]){case"y":case"Y":if(!i)return null;f=u.length,p.year=2===f?M.getInt((i<70?"20":"19")+u):i,g=!0;break;case"m":case"n":case"M":case"F":if(isNaN(i)){if(!(0<(o=d.getMonth(u))))return null;p.month=o}else{if(!(1<=i&&i<=12))return null;p.month=i}g=!0;break;case"d":case"j":if(!(1<=i&&i<=31))return null;p.day=i,g=!0;break;case"g":case"h":if(l=r[s=-1<n.indexOf("a")?n.indexOf("a"):-1<n.indexOf("A")?n.indexOf("A"):-1],-1!==s)c=M.compare(l,m.meridiem[0])?0:M.compare(l,m.meridiem[1])?12:-1,1<=i&&i<=12&&-1!=c?p.hour=i%12==0?c:i+c:0<=i&&i<=23&&(p.hour=i);else{if(!(0<=i&&i<=23))return null;p.hour=i}h=!0;break;case"G":case"H":if(!(0<=i&&i<=23))return null;p.hour=i,h=!0;break;case"i":if(!(0<=i&&i<=59))return null;p.min=i,h=!0;break;case"s":if(!(0<=i&&i<=59))return null;p.sec=i,h=!0}if(!0===g){var y=p.year||0,D=p.month?p.month-1:0,S=p.day||1;p.date=new Date(y,D,S,p.hour,p.min,p.sec,0)}else{if(!0!==h)return null;p.date=new Date(0,0,0,p.hour,p.min,p.sec,0)}return p.date},guessDate:function(t,e){if("string"!=typeof t)return t;var n,r,a,u,i,o,s=t.replace(this.separators,"\0").split("\0"),c=e.match(this.validParts),f=new Date,l=0;if(!/^[djmn]/g.test(c[0]))return t;for(a=0;a<s.length;a++){if(l=2,i=s[a],o=M.getInt(i.substr(0,2)),isNaN(o))return null;switch(a){case 0:"m"===c[0]||"n"===c[0]?f.setMonth(o-1):f.setDate(o);break;case 1:"m"===c[0]||"n"===c[0]?f.setDate(o):f.setMonth(o-1);break;case 2:if(r=f.getFullYear(),l=(n=i.length)<4?n:4,!(r=M.getInt(n<4?r.toString().substr(0,4-n)+i:i.substr(0,4))))return null;f.setFullYear(r);break;case 3:f.setHours(o);break;case 4:f.setMinutes(o);break;case 5:f.setSeconds(o)}0<(u=i.substr(l)).length&&s.splice(a+1,0,u)}return f},parseFormat:function(t,r){function e(t,e){return i[t]?i[t]():e}var n=this,a=n.dateSettings,u=/\\?(.?)/gi,i={d:function(){return M.lpad(i.j(),2)},D:function(){return a.daysShort[i.w()]},j:function(){return r.getDate()},l:function(){return a.days[i.w()]},N:function(){return i.w()||7},w:function(){return r.getDay()},z:function(){var t=new Date(i.Y(),i.n()-1,i.j()),e=new Date(i.Y(),0,1);return Math.round((t-e)/M.DAY)},W:function(){var t=new Date(i.Y(),i.n()-1,i.j()-i.N()+3),e=new Date(t.getFullYear(),0,4);return M.lpad(1+Math.round((t-e)/M.DAY/7),2)},F:function(){return a.months[r.getMonth()]},m:function(){return M.lpad(i.n(),2)},M:function(){return a.monthsShort[r.getMonth()]},n:function(){return r.getMonth()+1},t:function(){return new Date(i.Y(),i.n(),0).getDate()},L:function(){var t=i.Y();return t%4==0&&t%100!=0||t%400==0?1:0},o:function(){var t=i.n(),e=i.W();return i.Y()+(12===t&&e<9?1:1===t&&9<e?-1:0)},Y:function(){return r.getFullYear()},y:function(){return i.Y().toString().slice(-2)},a:function(){return i.A().toLowerCase()},A:function(){var t=i.G()<12?0:1;return a.meridiem[t]},B:function(){var t=r.getUTCHours()*M.HOUR,e=60*r.getUTCMinutes(),n=r.getUTCSeconds();return M.lpad(Math.floor((t+e+n+M.HOUR)/86.4)%1e3,3)},g:function(){return i.G()%12||12},G:function(){return r.getHours()},h:function(){return M.lpad(i.g(),2)},H:function(){return M.lpad(i.G(),2)},i:function(){return M.lpad(r.getMinutes(),2)},s:function(){return M.lpad(r.getSeconds(),2)},u:function(){return M.lpad(1e3*r.getMilliseconds(),6)},e:function(){return/\((.*)\)/.exec(String(r))[1]||"Coordinated Universal Time"},I:function(){return new Date(i.Y(),0)-Date.UTC(i.Y(),0)!=new Date(i.Y(),6)-Date.UTC(i.Y(),6)?1:0},O:function(){var t=r.getTimezoneOffset(),e=Math.abs(t);return(0<t?"-":"+")+M.lpad(100*Math.floor(e/60)+e%60,4)},P:function(){var t=i.O();return t.substr(0,3)+":"+t.substr(3,2)},T:function(){return(String(r).match(n.tzParts)||[""]).pop().replace(n.tzClip,"")||"UTC"},Z:function(){return 60*-r.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(u,e)},r:function(){return"D, d M Y H:i:s O".replace(u,e)},U:function(){return r.getTime()/1e3||0}};return e(t,t)},formatDate:function(t,e){var n,r,a,u,i,o="";if("string"==typeof t&&!(t=this.parseDate(t,e)))return null;if(t instanceof Date){for(a=e.length,n=0;n<a;n++)"S"!==(i=e.charAt(n))&&"\\"!==i&&(0<n&&"\\"===e.charAt(n-1)?o+=i:(u=this.parseFormat(i,t),n!==a-1&&this.intParts.test(i)&&"S"===e.charAt(n+1)&&(r=M.getInt(u)||0,u+=this.dateSettings.ordinal(r)),o+=u));return o}return""}},t});